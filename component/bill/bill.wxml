<!--component/bill/bill.wxml-->
<view class="unit_box"
      style="height: {{expand ? 490 : 100}}rpx"
>
  <view class="unit_head">
    <text class="unit_title">{{prefix + '_bill'}}</text>
    <custom-button button-name="{{expand ? 'grey_expandless' : 'grey_expandmore'}}"
                   bind:expandmore="handleExpandUnit"
                   bind:expandless="handleExpandUnit"
    ></custom-button>
  </view>
  <view class="unit_content">
    <view class="item_list">
      <view id="pre-date"
            class="item_box"
            hover-class="{{status == 'editinfo' ? 'edit_hover' : ''}}"
            style="color: {{status == 'editinfo' ? '#54aeff' : ''}}; background-color: {{highlightPicker == 'pre-date' ? '#ddf4ff' : ''}};"
            bind:tap="handlePickerTap"
      >
        <picker class="item_text item_picker"
                mode="date" 
                disabled="{{status != 'editinfo'}}"
                data-key="{{prefix == 'water' ? '1-0' : '2-0'}}"
                value="{{value[0]}}"
                bind:change="handleChangeDate"
                bind:cancel="handleCancel"
        >{{value[0]}}</picker>
      </view>
      <view id="pre-usage"
            class="item_box"
            hover-class="{{status == 'editinfo' ? 'edit_hover' : ''}}"
            hover-stay-time="100"
            bind:tap="handleFocusInput"
      >
        <text class="item_text"
              style="color: {{status == 'editinfo' ? '#54aeff' : ''}};"
        >{{value[1]}}</text>
        <input wx:if="{{focusIndex == 'pre-usage'}}"
               class="item_input"
               focus="{{true}}"
               placeholder="{{value[1]}}"
               type="digit"
               data-key="{{prefix == 'water' ? '1-1' : '2-1'}}"
               bind:blur="handleBlurInput"
        />
      </view>
    </view>
    <view class="item_list">
      <view id="cur-date"
            class="item_box"
            hover-class="{{status == 'editinfo' ? 'edit_hover' : ''}}"
            style="color: {{status == 'editinfo' ? '#54aeff' : ''}}; background-color: {{highlightPicker == 'cur-date' ? '#ddf4ff' : ''}};"
            bind:tap="handlePickerTap"
      >
        <picker class="item_text item_picker"
                mode="date" 
                disabled="{{status != 'editinfo'}}"
                data-key="{{prefix == 'water' ? '1-2' : '2-2'}}"
                value="{{value[2]}}"
                bind:change="handleChangeDate"
                bind:cancel="handleCancel"
        >{{value[2]}}</picker>
      </view>
      <view id="cur-usage"
            class="item_box"
            hover-class="{{status == 'editinfo' ? 'edit_hover' : ''}}"
            hover-stay-time="100"
            bind:tap="handleFocusInput"
      >
        <text class="item_text"
              style="color: {{status == 'editinfo' ? '#54aeff' : ''}};"
        >{{value[3]}}</text>
        <input wx:if="{{focusIndex == 'cur-usage'}}"
               class="item_input"
               focus="{{true}}"
               placeholder="{{value[3]}}"
               type="digit"
               data-key="{{prefix == 'water' ? '1-3' : '2-3'}}"
               bind:blur="handleBlurInput"
        />
      </view>
    </view>
    <view class="item_list">
      <view class="item_box"
            bind:longpress="handleSmile"
      >
        <text class="item_text">单价</text>
        <span class="text_span">
          ( 元/{{prefix == 'water' ? '吨' : '度'}} {{smile ? '(' : ')'}}:
        </span>
      </view>
      <view id="rate"
            class="item_box"
            hover-class="{{status == 'editinfo' ? 'edit_hover' : ''}}"
            hover-stay-time="100"
            bind:tap="handleFocusInput"
      >
        <text class="item_text"
              style="color: {{status == 'editinfo' ? '#54aeff' : ''}};"
        >{{value[4]}}</text>
        <input wx:if="{{focusIndex == 'rate'}}"
               class="item_input"
               focus="{{true}}"
               placeholder="{{value[4]}}"
               type="digit"
               data-key="{{prefix == 'water' ? '1-4' : '2-4'}}"
               bind:blur="handleBlurInput"
        />
      </view>
    </view>
    <view class="item_list">
      <view class="item_box">
        <text class="item_text">费用：</text>
      </view>
      <view class="item_box">
        <text class="item_text">{{cost}}</text>
      </view>
    </view>
    <!-- <view class="item_list">
      <view class="btn_group"
            bind:updateusage="handleUpdateUsage"
      >
        <custom-button button-name="blue_updateusage"
                       status="{{status}}"
        ></custom-button>
      </view>
    </view> -->
  </view>
</view>